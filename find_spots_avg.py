import PIL
from PIL import Image
import sys
import pickle

spaces = [[(498,444),(532,458),(491,526),(457,511)],
[(532,458),(566,473),(527,542),(491,526)],
[(566,473),(601,489),(561,557),(527,542)],
[(381,3),(418,7),(383,64),(346,50)],
[(418,6),(451,19),(413,77),(380,64)],
[(451,19),(483,31),(444,90),(413,77)],
[(483,31),(515,44),(478,104),(444,90)],
[(515,44),(550,58),(512,118),(478,104)],
[(512,118),(544,132),(582,72),(550,58)],
[(544,132),(575,144),(614,84),(582,72)],
[(515,44),(550,58),(585,1),(543,2)],
[(582,72),(550,58),(585,1),(619,11)],
[(582,72),(615,85),(653,24),(619,11)],
[(735,57),(770,71),(730,130),(697,116)],
[(770,71),(805,83),(765,143),(730,130)],
[(805,83),(839,96),(800,156),(765,143)],
[(839,96),(874,111),(836,171),(800,156)],
[(874,111),(909,121),(870,184),(836,171)],
[(909,121),(945,134),(906,198),(870,184)],
[(945,134),(981,147),(943,212),(906,198)],
[(943,212),(979,226),(940,290),(904,276)],
[(906,198),(943,212),(904,276),(868,261)],
[(870,184),(906,198),(868,261),(832,248)],
[(836,171),(870,184),(832,248),(797,234)],
[(800,156),(836,171),(797,234),(762,220)],
[(765,143),(800,156),(762,220),(727,206)]]

im = Image.open('parking_spaces.jpg')
rgb_im = im.convert('RGB')

offset = 0

for row in spaces:
    (x1,y1),(x2,y2),(x4,y4),(x3,y3) = row
    print(x1,y1,x2,y2,x3,y3,x4,y4)
    xx = x1
    xz = x2

    sum_r=0
    sum_g=0
    sum_b=0

    total_pixels = (y3-y1) * (x2-x1)

    for y in range(y1,y3):
        listx = range(x1-offset,x2-offset)
        for x in listx:
            print(x,y)
            r, g, b = rgb_im.getpixel((x, y))
            sum_r = sum_r + r
            sum_b = sum_b + b
            sum_g = sum_g + g

            xx = xx - 1
            xz = xz - 1
            print(r,g,b)
        print(sum_r/total_pixels,sum_g/total_pixels,sum_b/total_pixels)

        if y % 2 == 0:
            offset += 1
